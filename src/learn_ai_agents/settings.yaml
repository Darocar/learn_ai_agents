components:
  # Database Configuration
  databases:
    mongo:
      engine:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.database.mongo.mongo_engine.MongoEngineAdapter
        instances:
          default:
            params:
              uri: ${MONGO_URI}
              database_name: ${MONGO_DATABASE}
      pymongo:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.database.mongo.pymongo_async.PyMongoAsyncAdapter
        instances:
          default:
            params:
              uri: ${MONGO_URI}
              database_name: ${MONGO_DATABASE}

  llms:
    langchain:
      groq:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.llms.langchain_fwk.groq.LangchainGroqChatModelAdapter
          api_key: ${GROQ_API_KEY}
        instances:
          default:
            params:
              temperature: 0.1

  chat_history_persistence:
    mongo:
      store:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.chat_history.mongo.repository.MongoChatHistoryStore
        instances:
          default:
            params:
              database_ref: databases.mongo.engine.default

  checkpointer:
    mongo:
      saver:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.checkpointers.mongo.MongoCheckpointerAdapter
        instances:
          default:
            params:
              database_ref: databases.mongo.pymongo.default
              db_name: ${MONGO_DATABASE}
              checkpoint_collection_name: checkpoints
    memory:
      saver:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.checkpointers.memory.MemoryCheckpointerAdapter
        instances:
          default:
            params: {}

  tools:
    langchain:
      math_expression:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.tools.langchain_fwk.math_expressions.LangChainMathExpressionToolAdapter
        instances:
          default:
            params: {}
      duckduckgo_results_json:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.tools.langchain_fwk.web_search.LangChainWebSearchToolAdapter
        instances:
          default:
            params: {}
      age_calculator:
        constructor:
          module_class: learn_ai_agents.infrastructure.outbound.tools.langchain_fwk.age_calculator.LangChainAgeCalculatorToolAdapter
        instances:
          default:
            params: {}

agents:
  langchain:
    basic_answer:
      info:
        name: Basic Answer Agent
        description: An agent that provides basic answers using a language model.
      constructor:
        module_class: learn_ai_agents.infrastructure.outbound.agents.langchain_fwk.basic_answer.agent.BasicAnswerLangChainAgent
        components:
          llms: 
            default: llms.langchain.groq.default
    adding_memory:
      info:
        name: Adding Memory Agent
        description: An agent with conversation memory using LangGraph and MongoDB checkpointing.
      constructor:
        module_class: learn_ai_agents.infrastructure.outbound.agents.langchain_fwk.adding_memory.agent.AddingMemoryLangGraphAgent
        components:
          llms: 
            default: llms.langchain.groq.default
          chat_history_persistence: chat_history_persistence.mongo.store.default
          checkpointer: checkpointer.mongo.saver.default
    adding_tools:
      info:
        name: Adding Tools Agent
        description: An agent that uses external tools like web search and math expression evaluation.
      constructor:
        module_class: learn_ai_agents.infrastructure.outbound.agents.langchain_fwk.adding_tools.agent.AddingToolsLangchainAgent
        components:
          llms: 
            default: llms.langchain.groq.default
          tools:
            duckduckgo_results_json: tools.langchain.duckduckgo_results_json.default
            math_expression: tools.langchain.math_expression.default
            age_calculator: tools.langchain.age_calculator.default
          chat_history_persistence: chat_history_persistence.mongo.store.default
          checkpointer: checkpointer.mongo.saver.default
        config: {}

use_cases:
  basic_answer:
    info:
      name: Basic Answer Use Case
      description: A use case that provides basic answers using the basic answer agent.
      path_prefix: /01_basic_answer
      router_factory: learn_ai_agents.infrastructure.inbound.controllers.agents.basic_answer:get_router
    constructor:
      module_class: learn_ai_agents.application.use_cases.agents.basic_answer.basic_answer.BasicAnswerUseCase
      components:
        agents:
          agent: agents.langchain.basic_answer
      config: {}
  adding_memory:
    info:
      name: Adding Memory Use Case
      description: A use case that provides conversational answers with memory using LangGraph.
      path_prefix: /03_adding_memory
      router_factory: learn_ai_agents.infrastructure.inbound.controllers.agents.adding_memory:get_router
    constructor:
      module_class: learn_ai_agents.application.use_cases.agents.adding_memory.use_case.AddingMemoryUseCase
      components:
        agents:
          agent: agents.langchain.adding_memory
      config: {}
  adding_tools:
    info:
      name: Adding Tools Use Case
      description: A use case that provides answers using external tools like web search and math expression evaluation.
      path_prefix: /04_adding_tools
      router_factory: learn_ai_agents.infrastructure.inbound.controllers.agents.adding_tools:get_router
    constructor:
      module_class: learn_ai_agents.application.use_cases.agents.adding_tools.use_case.AddingToolsUseCase
      components:
        agents:
          agent: agents.langchain.adding_tools
      config: {}
